---
title: "Import NCIt in OWL format"
author: "digital ECMT"
date: "24/11/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(reticulate)
```



```{r download NCIt in OWL format}
## we will download the inferred version of the thesaurus, described at https://evs.nci.nih.gov/evs-download/thesaurus-downloads 

# NCIt_url_OWL <- "https://evs.nci.nih.gov/ftp1/NCI_Thesaurus/ThesaurusInf_21.10d.OWL.zip"
# destOWLfilename <- "NCIt_OWL.zip"
# download.file(url=NCIt_url_OWL,destfile = destOWLfilename)
# unzip(zipfile = paste0(getwd(),"/",destOWLfilename))

## the unzipped file is called "ThesaurusInferred.owl"
```


  
```{python read NCIt in OWL format}
## may need to point at python installation e.g. by running the following on command line

## stupid apostrophe
## Sys.setenv("RETICULATE_PYTHON" = "C:/Users/O’ReganPaul/AppData/Local/r-miniconda/python.exe")
## reticulate::py_discover_config()
# throws error Error in system2(command = python, args = shQuote(config_script), stdout = TRUE,  :   '"C:/Users/Oâ€™ReganPaul/AppData/Local/r-miniconda/python.exe"' not found


## Sys.setenv("RETICULATE_PYTHON" = "C:/Users/O\\’ReganPaul/AppData/Local/r-miniconda/python.exe")
# then calling reticulate::py_discover_config() gives an error... 
# Error in reticulate::py_discover_config() :   Python specified in RETICULATE_PYTHON (C:/Users/O\’ReganPaul/AppData/Local/r-miniconda/python.exe) does not exist

## Sys.setenv("RETICULATE_PYTHON" = "C:/Users/O\’ReganPaul/AppData/Local/r-miniconda/python.exe")
# throws Error: '\’' is an unrecognized escape in character string starting ""C:/Users/O\’"


## copying the r-miniconda folder to a different location, then running
## Sys.setenv("RETICULATE_PYTHON" = "C:\\r-miniconda\\python.exe")
## py_install("owlready2")
# throws error Error: could not find a Python environment for C:/r-miniconda/python.exe

```

    